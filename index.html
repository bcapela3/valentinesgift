<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dia dos Namorados ğŸ’•</title>

<style>
:root{
  --bg: #e8f7ef;         /* verde claro suave */
  --title: #0c6b3a;
  --text: #0f7a42;

  --btn-love: #ff4d88;
  --btn-nope: #ff88b3;

  --btn-w: 170px;
  --btn-h: 54px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  padding:80px 16px 40px;
  font-family: Arial, sans-serif;
  text-align:center;
  background: var(--bg);
}

h1{ color: var(--title); margin: 0 0 10px; }

#pergunta{
  color: var(--text);
  font-size:18px;
  margin: 0 0 28px;
}

.row{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:24px;
  flex-wrap:nowrap;
}

button{
  border:none;
  border-radius:16px;
  cursor:pointer;
  color:white;
  width: var(--btn-w);
  height: var(--btn-h);
  display:flex;
  align-items:center;
  justify-content:center;
  user-select:none;
  touch-action: manipulation;
  font-size:16px;
  padding: 0 12px;
}

#amote{ background: var(--btn-love); }

.slot{
  position:relative;
  width: var(--btn-w);
  height: var(--btn-h);
  overflow:hidden; /* nunca sai */
}

#nepia{
  position:absolute;
  left:0;
  top:0;
  width: var(--btn-w);
  height: var(--btn-h);
  background: var(--btn-nope);

  display:flex;
  align-items:center;
  justify-content:center;

  transition:
    left 0.18s ease,
    top 0.18s ease,
    transform 0.2s ease;
}

/* O texto agora Ã© um bloco que pode quebrar linha */
#nepia .inner{
  display:block;
  width:100%;
  padding: 0 10px;
  text-align:center;

  line-height: 1.08;
  white-space: normal;
  word-break: break-word;

  /* micro-flutuar MUITO subtil */
  animation: flutuar 3s ease-in-out infinite;
}

@keyframes flutuar{
  0%   { transform: translate(0px, 0px); }
  25%  { transform: translate(1px, -1px); }
  50%  { transform: translate(-1px, 1px); }
  75%  { transform: translate(1px, 0px); }
  100% { transform: translate(0px, 0px); }
}

#surpresa{
  margin-top:36px;
  opacity:0;
  transform:translateY(8px);
  transition:0.6s ease;
  display:none;
}

#surpresa.show{
  display:block;
  opacity:1;
  transform:translateY(0);
}

.frase{
  font-size:20px;
  color: var(--title);
  line-height:1.6;
  max-width:650px;
  margin:0 auto;
}
</style>
</head>

<body>

<h1>Feliz Dia dos Namorados â¤ï¸</h1>
<p id="pergunta">CÃª mi ama? Escolhe com cuidadoâ€¦ ğŸ˜</p>

<div class="row">
  <button id="amote" onclick="mostrarSurpresa()">Amo-te â¤ï¸</button>

  <div class="slot" id="slot">
    <button id="nepia" type="button"><span class="inner">NÃ©pia ğŸ™„</span></button>
  </div>
</div>

<div id="surpresa">
  <p class="frase">
    Obrigada por me mostrares o que Ã© amor verdadeiro:
    cheio de abraÃ§os e beijos, cru e real, com altos e baixos,
    felicidade, e sobretudo com gargalhadas.
    Ã‰s a melhor pessoa do mundo e eu tenho muita sorteâ¤ï¸
  </p>
</div>

<script>
  const nepia = document.getElementById("nepia");
  const inner = nepia.querySelector(".inner");
  const slot  = document.getElementById("slot");
  const surpresa = document.getElementById("surpresa");

  let tentativas = 0;
  let posX = 0;
  let posY = 0;
  let scale = 1;

  const frases = [
    "NÃ©pia ğŸ™„",
    "Tens a certeza? ğŸ˜³",
    "Olha bemâ€¦ ğŸ‘€",
    "Ãšltima oportunidade ğŸ˜ˆ",
    "Diz lÃ¡ a verdade ğŸ˜",
    "JÃ¡ estÃ¡s nervoso? ğŸ˜Œ",
    "NÃ£o vais conseguir ğŸ˜‚",
    "Corajoso(a)â€¦ ğŸ˜µâ€ğŸ’«",
    "Amorâ€¦ insiste mais ğŸ˜¼",
    "Eu mando aqui ğŸ˜ˆ"
  ];

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  // âœ… Ajusta automaticamente o tamanho do texto para CABER no botÃ£o
  function fitTextToButton() {
    const maxHeight = nepia.clientHeight - 10; // margem interna
    let size = 15; // comeÃ§a aqui
    inner.style.fontSize = size + "px";

    // dÃ¡ 1 frame para o browser recalcular alturas
    // e depois reduz atÃ© caber
    for (let i = 0; i < 20; i++) {
      if (inner.scrollHeight <= maxHeight) break;
      size -= 0.5;
      if (size <= 10) break;
      inner.style.fontSize = size + "px";
    }
  }

  function tentativaNope(){
    tentativas++;

    const idx = Math.min(frases.length - 1, tentativas - 1);
    inner.textContent = frases[idx];

    // crescimento subtil (mÃ¡x 6%)
    scale = Math.min(1.06, scale + 0.01);
    nepia.style.transform = `scale(${scale})`;

    // move controlado (nunca sai do slot)
    const maxX = slot.clientWidth  - nepia.offsetWidth;
    const maxY = slot.clientHeight - nepia.offsetHeight;

    const stepX = 30;
    const stepY = 12;

    const dirX = (Math.random() < 0.5) ? -1 : 1;
    const dirY = (Math.random() < 0.5) ? -1 : 1;

    posX = clamp(posX + dirX * stepX, 0, Math.max(0, maxX));
    posY = clamp(posY + dirY * stepY, 0, Math.max(0, maxY));

    nepia.style.left = posX + "px";
    nepia.style.top  = posY + "px";

    // depois de trocar texto, ajusta para caber
    requestAnimationFrame(fitTextToButton);
  }

  nepia.addEventListener("pointerdown", (e) => {
    e.preventDefault();
    tentativaNope();
  });

  nepia.addEventListener("click", (e) => {
    e.preventDefault();
    tentativaNope();
  });

  function mostrarSurpresa(){
    surpresa.classList.add("show");
  }

  window.addEventListener("load", () => {
    posX = 0;
    posY = 0;
    nepia.style.left = "0px";
    nepia.style.top  = "0px";
    inner.textContent = frases[0];
    fitTextToButton();
  });

  // se rodar o telemÃ³vel / mudar largura, volta a ajustar
  window.addEventListener("resize", () => {
    fitTextToButton();
  });
</script>

</body>
</html>
